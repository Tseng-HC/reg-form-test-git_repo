# 表單配置編輯器 - 使用說明

## 📖 目錄
1. [快速開始](#快速開始)
2. [編輯器使用方式](#編輯器使用方式)
3. [部署方式](#部署方式)
4. [檔案結構說明](#檔案結構說明)

---

## 🚀 快速開始

### 步驟 1：開啟編輯器
用瀏覽器開啟 `config-editor.html` 檔案：
```
template-system/config-editor.html
```

### 步驟 2：編輯配置
1. **基本設定**：填寫表單標題、LIFF ID、LINE OA ID 等
2. **橫幅設定**：設定活動橫幅圖片
3. **活動內容**：填寫活動說明文字
4. **地點資訊**：填寫場地名稱和地址
5. **表單欄位**：
   - 點擊欄位卡片展開編輯
   - 修改標題、選項內容等
   - 新增自訂欄位

### 步驟 3：匯出配置
點擊右上角「匯出 JSON」按鈕，儲存配置檔案（例如：`my-event.json`）

---

## 🎨 編輯器使用方式

### 基本設定
- **表單標題**：顯示在表單頂部的活動名稱
- **版本號**：配置版本，方便管理
- **LIFF ID**：LINE LIFF 應用程式 ID
- **LINE OA ID**：LINE 官方帳號 ID（例如：@246trduk）
- **Google Apps Script URL**：表單資料提交的後端網址

### 橫幅設定
- **顯示橫幅**：勾選後會在表單頂部顯示橫幅圖片
- **圖片網址**：橫幅圖片的 URL
- **替代文字**：圖片無法載入時顯示的文字

### 活動內容
- **顯示活動內容區塊**：控制是否顯示此區塊
- **區塊標題**：區塊的標題文字
- **內容說明**：活動的詳細說明（支援多行文字）

### 地點資訊
- **顯示地點資訊區塊**：控制是否顯示此區塊
- **區塊標題**：區塊的標題文字
- **場地名稱**：活動場地名稱
- **地址**：場地地址
- **顯示 Google 地圖連結**：勾選後會產生 Google 地圖連結

### 表單欄位編輯

#### 預設欄位（不可刪除）
1. **報名場次 [session]**
   - 類型：單選
   - 可編輯：標題、場次時間選項、排列方式

2. **姓名 [realName]**
   - 類型：文字輸入
   - 可編輯：標題、佔位符文字

3. **性別 [gender]**
   - 類型：單選
   - 可編輯：標題、選項、排列方式

4. **年齡區段 [age]**
   - 類型：單選
   - 可編輯：標題、年齡區段選項

5. **從哪得知 [source]**
   - 類型：複選
   - 可編輯：標題、來源選項

6. **是否接收活動提醒 [remind]**
   - 類型：提醒設定
   - 可編輯：標題、LINE 提醒開關、Email 提醒開關

#### 編輯欄位
1. 點擊欄位卡片展開
2. 直接在卡片內修改內容：
   - **標題**：欄位顯示的標題
   - **選項**（單選/複選）：每個選項可獨立編輯、新增、刪除
   - **佔位符**（文字類型）：輸入框的提示文字
   - **排列方式**（單選）：水平或垂直排列
   - **必填欄位**：勾選後此欄位為必填

#### 新增自訂欄位
1. 點擊「+ 新增欄位」按鈕
2. 選擇欄位類型：
   - 文字輸入
   - Email
   - 文字區域
   - 單選
   - 複選
3. 填寫欄位資訊：
   - **欄位標題**：顯示給使用者的標題
   - **欄位 ID**：英文識別碼（不可重複）
   - 根據類型填寫其他資訊
4. 點擊「確定新增」

#### 刪除欄位
- **預設欄位**：無法刪除，只能停用（關閉開關）
- **自訂欄位**：展開卡片後，點擊底部的「刪除此欄位」按鈕

---

## 🌐 部署方式

### 方式一：使用配置檔 + 樣板系統

#### 需要上傳的檔案：
```
template-system/
├── form-template.html      # 表單樣板頁面
├── form-renderer.js        # 表單渲染引擎
└── configs/
    └── my-event.json       # 您匯出的配置檔
```

#### 部署步驟：
1. 在編輯器中完成配置後，點擊「匯出 JSON」
2. 將匯出的 JSON 檔案放到 `configs/` 資料夾
3. 修改 `form-template.html` 載入您的配置檔：
   ```javascript
   // 在 form-template.html 中找到這行並修改
   const response = await fetch('./configs/my-event.json');
   ```
4. 上傳以下檔案到伺服器：
   - `form-template.html`
   - `form-renderer.js`
   - `configs/my-event.json`

#### 優點：
- ✅ 檔案小，載入快
- ✅ 可以隨時更換配置檔
- ✅ 多個活動可共用同一個樣板

---

### 方式二：匯出獨立 HTML（推薦！最簡單）

#### 需要上傳的檔案：
```
只需一個檔案！
└── registration-form.html  # 包含所有功能的獨立 HTML
```

#### 部署步驟：
1. 在編輯器中完成配置後，點擊右上角「**匯出 HTML**」按鈕
2. 輸入檔案名稱（例如：`2026-01-event`）
3. 下載的 HTML 檔案已包含：
   - ✅ 您的所有配置
   - ✅ 表單渲染引擎
   - ✅ 所有樣式
   - ✅ LIFF SDK 連結
4. 直接上傳這個 HTML 檔案到伺服器即可使用！

#### 優點：
- ✅ **超級簡單**：只需上傳一個檔案
- ✅ **獨立運作**：不需要其他檔案
- ✅ **方便管理**：一個活動一個檔案
- ✅ **快速部署**：適合臨時活動或測試

#### 注意事項：
- 檔案會比較大（約 30-40KB），因為包含完整的渲染引擎
- 修改配置需要重新匯出 HTML
- 適合單一活動使用

---

### 🆚 兩種方式比較

| 項目       | 方式一：配置檔 | 方式二：獨立 HTML |
| ---------- | -------------- | ----------------- |
| 上傳檔案數 | 3 個           | 1 個              |
| 檔案大小   | 小（分散）     | 中（單一）        |
| 部署難度   | 中等           | 超簡單 ⭐          |
| 修改配置   | 只需替換 JSON  | 需重新匯出 HTML   |
| 適用場景   | 多個活動共用   | 單一活動          |
| 推薦度     | ⭐⭐⭐            | ⭐⭐⭐⭐⭐             |

**建議：新手或臨時活動使用「方式二」，長期維護多個活動使用「方式一」**

---

## 📁 檔案結構說明

```
template-system/
├── config-editor.html              # 配置編輯器（本機使用）
├── form-template.html              # 表單樣板（需上傳）
├── 使用說明.md                     # 本說明文件
├── 共用樣板設定說明.md              # 共用樣板設定說明
├── configs/                        # ⭐ 系統設定 + 程式碼
│   ├── README.md                   # 資料夾說明
│   ├── default-config.json         # 預設配置範本（空白）
│   ├── template-config.json        # 完全空白範本
│   ├── field-library.json          # 欄位庫
│   ├── editor-app.js               # 編輯器邏輯
│   └── form-renderer.js            # 表單渲染引擎
└── configs-export/                 # ⭐ 活動配置檔（需上傳）
    ├── README.md                   # 資料夾說明
    └── (您的活動配置檔...)         # 例如：event-2026-01.json
```

### 📂 資料夾用途說明

#### **configs/** - 系統設定 + 程式碼
- ✅ 存放系統設定檔（default-config.json, field-library.json）
- ✅ 存放程式碼（editor-app.js, form-renderer.js）
- ⚠️ 請勿在此存放活動配置檔
- 📝 編輯器和樣板系統會讀取這些檔案

#### **configs-export/** - 活動配置檔
- ✅ **網站會讀取**這個資料夾的配置檔
- ✅ **從編輯器匯出**的檔案直接儲存在這裡
- ✅ **需要上傳**到伺服器
- ✅ 可以保留多個版本和備份
- 📝 實際使用的活動配置都在這裡

### 🔄 正確的工作流程

```
1. 在編輯器中編輯配置
   ↓
2. 點擊「匯出 JSON」
   ↓
3. 儲存到 configs-export/ 資料夾
   ↓
4. 本機測試確認
   ↓
5. 上傳 configs-export/ 到伺服器
```

### 📤 部署時需要上傳的檔案

```
template-system/
├── form-template.html          # ✅ 需要
├── configs/
│   └── form-renderer.js        # ✅ 需要
└── configs-export/             # ✅ 需要（整個資料夾）
    ├── event-2026-01.json
    └── event-2026-02.json
```

### 🚫 不需要上傳的檔案

```
template-system/
├── config-editor.html          # ❌ 本機使用
├── configs/
    ├── editor-app.js           # ❌ 本機使用
    ├── default-config.json     # ❌ 本機使用
    └── field-library.json      # ❌ 本機使用
```

---

## 💡 常見問題

### Q1：如何修改已發布的表單？
1. 在編輯器中載入原本的配置檔（「匯入 JSON」）
2. 修改後重新匯出
3. 替換伺服器上的配置檔案

### Q2：可以同時管理多個活動嗎？
可以！每個活動使用不同的配置檔：
```
configs/
├── event-2026-01.json
├── event-2026-02.json
└── event-2026-03.json
```
在 `form-template.html` 中切換載入不同的配置檔即可。

### Q3：欄位 ID 為什麼不能重複？
欄位 ID 是用來識別和儲存資料的唯一標識，重複會導致資料混淆。

### Q4：如何備份配置？
定期使用「匯出 JSON」功能，將配置檔案儲存到安全的地方。

### Q5：預覽功能無法正常顯示？
確保 `form-template.html` 和 `form-renderer.js` 在同一個資料夾中。

---

## 📞 技術支援

如有問題，請檢查：
1. 瀏覽器控制台（F12）是否有錯誤訊息
2. 配置檔案的 JSON 格式是否正確
3. 所有必要檔案是否都已上傳

---

## 🔄 更新記錄

### v1.0 (2026-01-27)
- ✅ 卡片式欄位編輯介面
- ✅ 活動內容編輯
- ✅ 地點資訊編輯
- ✅ 提醒設定（LINE/Email 開關）
- ✅ 自訂欄位新增功能
- ✅ 配置匯入/匯出功能
